{"ast":null,"code":"\"use strict\";\n\nvar ParseUUIDPipe_1;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ParseUUIDPipe = void 0;\nconst tslib_1 = require(\"tslib\");\nconst injectable_decorator_1 = require(\"../decorators/core/injectable.decorator\");\nconst optional_decorator_1 = require(\"../decorators/core/optional.decorator\");\nconst http_status_enum_1 = require(\"../enums/http-status.enum\");\nconst http_error_by_code_util_1 = require(\"../utils/http-error-by-code.util\");\nconst shared_utils_1 = require(\"../utils/shared.utils\");\n/**\n * Defines the built-in ParseUUID Pipe\n *\n * @see [Built-in Pipes](https://docs.nestjs.com/pipes#built-in-pipes)\n *\n * @publicApi\n */\nlet ParseUUIDPipe = ParseUUIDPipe_1 = class ParseUUIDPipe {\n  constructor(options) {\n    options = options || {};\n    const {\n      exceptionFactory,\n      errorHttpStatusCode = http_status_enum_1.HttpStatus.BAD_REQUEST,\n      version\n    } = options;\n    this.version = version;\n    this.exceptionFactory = exceptionFactory || (error => new http_error_by_code_util_1.HttpErrorByCode[errorHttpStatusCode](error));\n  }\n  async transform(value, metadata) {\n    if (!this.isUUID(value, this.version)) {\n      throw this.exceptionFactory(`Validation failed (uuid${this.version ? ` v ${this.version}` : ''} is expected)`);\n    }\n    return value;\n  }\n  isUUID(str) {\n    let version = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'all';\n    if (!(0, shared_utils_1.isString)(str)) {\n      throw this.exceptionFactory('The value passed as UUID is not a string');\n    }\n    const pattern = ParseUUIDPipe_1.uuidRegExps[version];\n    return pattern === null || pattern === void 0 ? void 0 : pattern.test(str);\n  }\n};\nParseUUIDPipe.uuidRegExps = {\n  3: /^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,\n  4: /^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,\n  5: /^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,\n  all: /^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i\n};\nParseUUIDPipe = ParseUUIDPipe_1 = tslib_1.__decorate([(0, injectable_decorator_1.Injectable)(), tslib_1.__param(0, (0, optional_decorator_1.Optional)()), tslib_1.__metadata(\"design:paramtypes\", [Object])], ParseUUIDPipe);\nexports.ParseUUIDPipe = ParseUUIDPipe;","map":{"version":3,"names":["ParseUUIDPipe_1","Object","defineProperty","exports","value","ParseUUIDPipe","tslib_1","require","injectable_decorator_1","optional_decorator_1","http_status_enum_1","http_error_by_code_util_1","shared_utils_1","constructor","options","exceptionFactory","errorHttpStatusCode","HttpStatus","BAD_REQUEST","version","error","HttpErrorByCode","transform","metadata","isUUID","str","arguments","length","undefined","isString","pattern","uuidRegExps","test","all","__decorate","Injectable","__param","Optional","__metadata"],"sources":["/home/benjamin/Documents/42/42_ft_transcendence/front/node_modules/@nestjs/common/pipes/parse-uuid.pipe.js"],"sourcesContent":["\"use strict\";\nvar ParseUUIDPipe_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ParseUUIDPipe = void 0;\nconst tslib_1 = require(\"tslib\");\nconst injectable_decorator_1 = require(\"../decorators/core/injectable.decorator\");\nconst optional_decorator_1 = require(\"../decorators/core/optional.decorator\");\nconst http_status_enum_1 = require(\"../enums/http-status.enum\");\nconst http_error_by_code_util_1 = require(\"../utils/http-error-by-code.util\");\nconst shared_utils_1 = require(\"../utils/shared.utils\");\n/**\n * Defines the built-in ParseUUID Pipe\n *\n * @see [Built-in Pipes](https://docs.nestjs.com/pipes#built-in-pipes)\n *\n * @publicApi\n */\nlet ParseUUIDPipe = ParseUUIDPipe_1 = class ParseUUIDPipe {\n    constructor(options) {\n        options = options || {};\n        const { exceptionFactory, errorHttpStatusCode = http_status_enum_1.HttpStatus.BAD_REQUEST, version, } = options;\n        this.version = version;\n        this.exceptionFactory =\n            exceptionFactory ||\n                (error => new http_error_by_code_util_1.HttpErrorByCode[errorHttpStatusCode](error));\n    }\n    async transform(value, metadata) {\n        if (!this.isUUID(value, this.version)) {\n            throw this.exceptionFactory(`Validation failed (uuid${this.version ? ` v ${this.version}` : ''} is expected)`);\n        }\n        return value;\n    }\n    isUUID(str, version = 'all') {\n        if (!(0, shared_utils_1.isString)(str)) {\n            throw this.exceptionFactory('The value passed as UUID is not a string');\n        }\n        const pattern = ParseUUIDPipe_1.uuidRegExps[version];\n        return pattern === null || pattern === void 0 ? void 0 : pattern.test(str);\n    }\n};\nParseUUIDPipe.uuidRegExps = {\n    3: /^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,\n    4: /^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,\n    5: /^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,\n    all: /^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,\n};\nParseUUIDPipe = ParseUUIDPipe_1 = tslib_1.__decorate([\n    (0, injectable_decorator_1.Injectable)(),\n    tslib_1.__param(0, (0, optional_decorator_1.Optional)()),\n    tslib_1.__metadata(\"design:paramtypes\", [Object])\n], ParseUUIDPipe);\nexports.ParseUUIDPipe = ParseUUIDPipe;\n"],"mappings":"AAAA,YAAY;;AACZ,IAAIA,eAAe;AACnBC,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,aAAa,GAAG,KAAK,CAAC;AAC9B,MAAMC,OAAO,GAAGC,OAAO,CAAC,OAAO,CAAC;AAChC,MAAMC,sBAAsB,GAAGD,OAAO,CAAC,yCAAyC,CAAC;AACjF,MAAME,oBAAoB,GAAGF,OAAO,CAAC,uCAAuC,CAAC;AAC7E,MAAMG,kBAAkB,GAAGH,OAAO,CAAC,2BAA2B,CAAC;AAC/D,MAAMI,yBAAyB,GAAGJ,OAAO,CAAC,kCAAkC,CAAC;AAC7E,MAAMK,cAAc,GAAGL,OAAO,CAAC,uBAAuB,CAAC;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIF,aAAa,GAAGL,eAAe,GAAG,MAAMK,aAAa,CAAC;EACtDQ,WAAWA,CAACC,OAAO,EAAE;IACjBA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;IACvB,MAAM;MAAEC,gBAAgB;MAAEC,mBAAmB,GAAGN,kBAAkB,CAACO,UAAU,CAACC,WAAW;MAAEC;IAAS,CAAC,GAAGL,OAAO;IAC/G,IAAI,CAACK,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACJ,gBAAgB,GACjBA,gBAAgB,KACXK,KAAK,IAAI,IAAIT,yBAAyB,CAACU,eAAe,CAACL,mBAAmB,CAAC,CAACI,KAAK,CAAC,CAAC;EAChG;EACA,MAAME,SAASA,CAAClB,KAAK,EAAEmB,QAAQ,EAAE;IAC7B,IAAI,CAAC,IAAI,CAACC,MAAM,CAACpB,KAAK,EAAE,IAAI,CAACe,OAAO,CAAC,EAAE;MACnC,MAAM,IAAI,CAACJ,gBAAgB,CAAE,0BAAyB,IAAI,CAACI,OAAO,GAAI,MAAK,IAAI,CAACA,OAAQ,EAAC,GAAG,EAAG,eAAc,CAAC;IAClH;IACA,OAAOf,KAAK;EAChB;EACAoB,MAAMA,CAACC,GAAG,EAAmB;IAAA,IAAjBN,OAAO,GAAAO,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;IACvB,IAAI,CAAC,CAAC,CAAC,EAAEd,cAAc,CAACiB,QAAQ,EAAEJ,GAAG,CAAC,EAAE;MACpC,MAAM,IAAI,CAACV,gBAAgB,CAAC,0CAA0C,CAAC;IAC3E;IACA,MAAMe,OAAO,GAAG9B,eAAe,CAAC+B,WAAW,CAACZ,OAAO,CAAC;IACpD,OAAOW,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,OAAO,CAACE,IAAI,CAACP,GAAG,CAAC;EAC9E;AACJ,CAAC;AACDpB,aAAa,CAAC0B,WAAW,GAAG;EACxB,CAAC,EAAE,kEAAkE;EACrE,CAAC,EAAE,wEAAwE;EAC3E,CAAC,EAAE,wEAAwE;EAC3EE,GAAG,EAAE;AACT,CAAC;AACD5B,aAAa,GAAGL,eAAe,GAAGM,OAAO,CAAC4B,UAAU,CAAC,CACjD,CAAC,CAAC,EAAE1B,sBAAsB,CAAC2B,UAAU,EAAE,CAAC,EACxC7B,OAAO,CAAC8B,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE3B,oBAAoB,CAAC4B,QAAQ,EAAE,CAAC,CAAC,EACxD/B,OAAO,CAACgC,UAAU,CAAC,mBAAmB,EAAE,CAACrC,MAAM,CAAC,CAAC,CACpD,EAAEI,aAAa,CAAC;AACjBF,OAAO,CAACE,aAAa,GAAGA,aAAa"},"metadata":{},"sourceType":"script","externalDependencies":[]}