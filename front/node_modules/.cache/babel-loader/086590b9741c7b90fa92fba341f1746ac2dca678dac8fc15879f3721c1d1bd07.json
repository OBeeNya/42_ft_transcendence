{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HttpException = void 0;\nconst services_1 = require(\"../services\");\nconst shared_utils_1 = require(\"../utils/shared.utils\");\n/**\n * Defines the base Nest HTTP exception, which is handled by the default\n * Exceptions Handler.\n *\n * @see [Built-in HTTP exceptions](https://docs.nestjs.com/exception-filters#built-in-http-exceptions)\n *\n * @publicApi\n */\nclass HttpException extends Error {\n  /**\n   * Instantiate a plain HTTP Exception.\n   *\n   * @example\n   * throw new HttpException()\n   * throw new HttpException('message', HttpStatus.BAD_REQUEST)\n   * throw new HttpException({ reason: 'this can be a human readable reason' }, HttpStatus.BAD_REQUEST)\n   * throw new HttpException(new Error('Cause Error'), HttpStatus.BAD_REQUEST)\n   * throw new HttpException('custom message', HttpStatus.BAD_REQUEST, {\n   *  cause: new Error('Cause Error'),\n   * })\n   *\n   *\n   * @usageNotes\n   * The constructor arguments define the response and the HTTP response status code.\n   * - The `response` argument (required) defines the JSON response body. alternatively, it can also be\n   *  an error object that is used to define an error [cause](https://nodejs.org/en/blog/release/v16.9.0/#error-cause).\n   * - The `status` argument (required) defines the HTTP Status Code.\n   * - The `options` argument (optional) defines additional error options. Currently, it supports the `cause` attribute,\n   *  and can be used as an alternative way to specify the error cause: `const error = new HttpException('description', 400, { cause: new Error() });`\n   *\n   * By default, the JSON response body contains two properties:\n   * - `statusCode`: the Http Status Code.\n   * - `message`: a short description of the HTTP error by default; override this\n   * by supplying a string in the `response` parameter.\n   *\n   * To override the entire JSON response body, pass an object to the `createBody`\n   * method. Nest will serialize the object and return it as the JSON response body.\n   *\n   * The `status` argument is required, and should be a valid HTTP status code.\n   * Best practice is to use the `HttpStatus` enum imported from `nestjs/common`.\n   *\n   * @param response string, object describing the error condition or the error cause.\n   * @param status HTTP response status code.\n   * @param options An object used to add an error cause.\n   */\n  constructor(response, status, options) {\n    super();\n    this.response = response;\n    this.status = status;\n    this.options = options;\n    this.initMessage();\n    this.initName();\n    this.initCause();\n  }\n  /**\n   * Configures error chaining support\n   *\n   * See:\n   * - https://nodejs.org/en/blog/release/v16.9.0/#error-cause\n   * - https://github.com/microsoft/TypeScript/issues/45167\n   */\n  initCause() {\n    var _a;\n    if ((_a = this.options) === null || _a === void 0 ? void 0 : _a.cause) {\n      this.cause = this.options.cause;\n      return;\n    }\n    if (this.response instanceof Error) {\n      services_1.Logger.warn('DEPRECATED! Passing the error cause as the first argument to HttpException constructor is deprecated. You should use the \"options\" parameter instead: new HttpException(\"message\", 400, { cause: new Error(\"Some Error\") }) ');\n      this.cause = this.response;\n    }\n  }\n  initMessage() {\n    var _a, _b;\n    if ((0, shared_utils_1.isString)(this.response)) {\n      this.message = this.response;\n    } else if ((0, shared_utils_1.isObject)(this.response) && (0, shared_utils_1.isString)(this.response.message)) {\n      this.message = this.response.message;\n    } else if (this.constructor) {\n      this.message = (_b = (_a = this.constructor.name.match(/[A-Z][a-z]+|[0-9]+/g)) === null || _a === void 0 ? void 0 : _a.join(' ')) !== null && _b !== void 0 ? _b : 'Error';\n    }\n  }\n  initName() {\n    this.name = this.constructor.name;\n  }\n  getResponse() {\n    return this.response;\n  }\n  getStatus() {\n    return this.status;\n  }\n  static createBody(objectOrErrorMessage, description, statusCode) {\n    if (!objectOrErrorMessage) {\n      return {\n        statusCode,\n        message: description\n      };\n    }\n    return (0, shared_utils_1.isObject)(objectOrErrorMessage) && !Array.isArray(objectOrErrorMessage) ? objectOrErrorMessage : {\n      statusCode,\n      message: objectOrErrorMessage,\n      error: description\n    };\n  }\n  static getDescriptionFrom(descriptionOrOptions) {\n    return (0, shared_utils_1.isString)(descriptionOrOptions) ? descriptionOrOptions : descriptionOrOptions === null || descriptionOrOptions === void 0 ? void 0 : descriptionOrOptions.description;\n  }\n  static getHttpExceptionOptionsFrom(descriptionOrOptions) {\n    return (0, shared_utils_1.isString)(descriptionOrOptions) ? {} : descriptionOrOptions;\n  }\n  /**\n   * Utility method used to extract the error description and httpExceptionOptions from the given argument.\n   * This is used by inheriting classes to correctly parse both options.\n   * @returns the error description and the httpExceptionOptions as an object.\n   */\n  static extractDescriptionAndOptionsFrom(descriptionOrOptions) {\n    const description = (0, shared_utils_1.isString)(descriptionOrOptions) ? descriptionOrOptions : descriptionOrOptions === null || descriptionOrOptions === void 0 ? void 0 : descriptionOrOptions.description;\n    const httpExceptionOptions = (0, shared_utils_1.isString)(descriptionOrOptions) ? {} : descriptionOrOptions;\n    return {\n      description,\n      httpExceptionOptions\n    };\n  }\n}\nexports.HttpException = HttpException;","map":{"version":3,"names":["Object","defineProperty","exports","value","HttpException","services_1","require","shared_utils_1","Error","constructor","response","status","options","initMessage","initName","initCause","_a","cause","Logger","warn","_b","isString","message","isObject","name","match","join","getResponse","getStatus","createBody","objectOrErrorMessage","description","statusCode","Array","isArray","error","getDescriptionFrom","descriptionOrOptions","getHttpExceptionOptionsFrom","extractDescriptionAndOptionsFrom","httpExceptionOptions"],"sources":["/home/benjamin/Documents/42/42_ft_transcendence/front/node_modules/@nestjs/common/exceptions/http.exception.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HttpException = void 0;\nconst services_1 = require(\"../services\");\nconst shared_utils_1 = require(\"../utils/shared.utils\");\n/**\n * Defines the base Nest HTTP exception, which is handled by the default\n * Exceptions Handler.\n *\n * @see [Built-in HTTP exceptions](https://docs.nestjs.com/exception-filters#built-in-http-exceptions)\n *\n * @publicApi\n */\nclass HttpException extends Error {\n    /**\n     * Instantiate a plain HTTP Exception.\n     *\n     * @example\n     * throw new HttpException()\n     * throw new HttpException('message', HttpStatus.BAD_REQUEST)\n     * throw new HttpException({ reason: 'this can be a human readable reason' }, HttpStatus.BAD_REQUEST)\n     * throw new HttpException(new Error('Cause Error'), HttpStatus.BAD_REQUEST)\n     * throw new HttpException('custom message', HttpStatus.BAD_REQUEST, {\n     *  cause: new Error('Cause Error'),\n     * })\n     *\n     *\n     * @usageNotes\n     * The constructor arguments define the response and the HTTP response status code.\n     * - The `response` argument (required) defines the JSON response body. alternatively, it can also be\n     *  an error object that is used to define an error [cause](https://nodejs.org/en/blog/release/v16.9.0/#error-cause).\n     * - The `status` argument (required) defines the HTTP Status Code.\n     * - The `options` argument (optional) defines additional error options. Currently, it supports the `cause` attribute,\n     *  and can be used as an alternative way to specify the error cause: `const error = new HttpException('description', 400, { cause: new Error() });`\n     *\n     * By default, the JSON response body contains two properties:\n     * - `statusCode`: the Http Status Code.\n     * - `message`: a short description of the HTTP error by default; override this\n     * by supplying a string in the `response` parameter.\n     *\n     * To override the entire JSON response body, pass an object to the `createBody`\n     * method. Nest will serialize the object and return it as the JSON response body.\n     *\n     * The `status` argument is required, and should be a valid HTTP status code.\n     * Best practice is to use the `HttpStatus` enum imported from `nestjs/common`.\n     *\n     * @param response string, object describing the error condition or the error cause.\n     * @param status HTTP response status code.\n     * @param options An object used to add an error cause.\n     */\n    constructor(response, status, options) {\n        super();\n        this.response = response;\n        this.status = status;\n        this.options = options;\n        this.initMessage();\n        this.initName();\n        this.initCause();\n    }\n    /**\n     * Configures error chaining support\n     *\n     * See:\n     * - https://nodejs.org/en/blog/release/v16.9.0/#error-cause\n     * - https://github.com/microsoft/TypeScript/issues/45167\n     */\n    initCause() {\n        var _a;\n        if ((_a = this.options) === null || _a === void 0 ? void 0 : _a.cause) {\n            this.cause = this.options.cause;\n            return;\n        }\n        if (this.response instanceof Error) {\n            services_1.Logger.warn('DEPRECATED! Passing the error cause as the first argument to HttpException constructor is deprecated. You should use the \"options\" parameter instead: new HttpException(\"message\", 400, { cause: new Error(\"Some Error\") }) ');\n            this.cause = this.response;\n        }\n    }\n    initMessage() {\n        var _a, _b;\n        if ((0, shared_utils_1.isString)(this.response)) {\n            this.message = this.response;\n        }\n        else if ((0, shared_utils_1.isObject)(this.response) &&\n            (0, shared_utils_1.isString)(this.response.message)) {\n            this.message = this.response.message;\n        }\n        else if (this.constructor) {\n            this.message =\n                (_b = (_a = this.constructor.name.match(/[A-Z][a-z]+|[0-9]+/g)) === null || _a === void 0 ? void 0 : _a.join(' ')) !== null && _b !== void 0 ? _b : 'Error';\n        }\n    }\n    initName() {\n        this.name = this.constructor.name;\n    }\n    getResponse() {\n        return this.response;\n    }\n    getStatus() {\n        return this.status;\n    }\n    static createBody(objectOrErrorMessage, description, statusCode) {\n        if (!objectOrErrorMessage) {\n            return { statusCode, message: description };\n        }\n        return (0, shared_utils_1.isObject)(objectOrErrorMessage) &&\n            !Array.isArray(objectOrErrorMessage)\n            ? objectOrErrorMessage\n            : { statusCode, message: objectOrErrorMessage, error: description };\n    }\n    static getDescriptionFrom(descriptionOrOptions) {\n        return (0, shared_utils_1.isString)(descriptionOrOptions)\n            ? descriptionOrOptions\n            : descriptionOrOptions === null || descriptionOrOptions === void 0 ? void 0 : descriptionOrOptions.description;\n    }\n    static getHttpExceptionOptionsFrom(descriptionOrOptions) {\n        return (0, shared_utils_1.isString)(descriptionOrOptions) ? {} : descriptionOrOptions;\n    }\n    /**\n     * Utility method used to extract the error description and httpExceptionOptions from the given argument.\n     * This is used by inheriting classes to correctly parse both options.\n     * @returns the error description and the httpExceptionOptions as an object.\n     */\n    static extractDescriptionAndOptionsFrom(descriptionOrOptions) {\n        const description = (0, shared_utils_1.isString)(descriptionOrOptions)\n            ? descriptionOrOptions\n            : descriptionOrOptions === null || descriptionOrOptions === void 0 ? void 0 : descriptionOrOptions.description;\n        const httpExceptionOptions = (0, shared_utils_1.isString)(descriptionOrOptions)\n            ? {}\n            : descriptionOrOptions;\n        return {\n            description,\n            httpExceptionOptions,\n        };\n    }\n}\nexports.HttpException = HttpException;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}